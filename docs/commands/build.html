<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>button build - Button</title>
  <meta name="description" content="Brings the build state up-to-date. This includes:">

  <link rel="stylesheet" href="/button/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="/button/assets/css/main.css">

  <link rel="canonical" href="https://jasonwhite.github.io/button/docs/commands/build">
</head>

    <body>
        <nav class="navbar navbar-static-top navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/button/">Button</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/button/docs/" class="active">Docs</a></li>
                <li><a href="https://github.com/jasonwhite/button">View on GitHub</a></li>
            </ul>
        </div>
    </div>
</nav>

        <div class="container">
            <div class="row">
                <div id="sidebar" class="col-lg-2 col-md-3">
                    <ul class="nav nav-list">
    <li class="nav-header">Getting Started</li>
    
    
        
            <li><a href="/button/docs/">Overview</a></li>
        
    
        
            <li><a href="/button/docs/install">Installation</a></li>
        
    

    <li class="nav-header">Commands</li>
    
    
        
            <li class="active"><a href="/button/docs/commands/build">button build</a></li>
        
    
        
            <li><a href="/button/docs/commands/graph">button graph</a></li>
        
    
</ul>

                </div>
                <div class="col-lg-10 col-md-9">
                    <article>
                        <div class="page-header"><h1>button build</h1></div>
                        <p>Brings the build state up-to-date. This includes:</p>

<ol>
  <li>
    <p>Updating the internal task graph based on structural changes to the build
description.</p>
  </li>
  <li>
    <p>Deleting outputs that should no longer get built. For example, if the task
<code class="highlighter-rouge">gcc -c foo.c -o foo.o</code> was removed from the build description, the output
<code class="highlighter-rouge">foo.o</code> will be deleted from disk.</p>
  </li>
  <li>
    <p>Checking for changes to resources. A resource is considered “changed” if
both its last modification time changed <em>and</em> the checksum of its contents
changed.</p>
  </li>
  <li>
    <p>Running tasks based on changed inputs.</p>
  </li>
</ol>

<p>This will be the command you will use 99% of the time. It is equivalent to an
“incremental build”. Although you should never need to do a complete rebuild,
you can do so by running <code class="highlighter-rouge">button clean</code> followed by <code class="highlighter-rouge">button build</code>.</p>

<h2 id="example">Example</h2>

<p>If your root build description <code class="highlighter-rouge">button.json</code> is in the current working directory
or one of its parent directories, simply run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ button build
</code></pre>
</div>

<p>If instead your root build description is named something other than
<code class="highlighter-rouge">button.json</code>, such as <code class="highlighter-rouge">my_build_description.json</code>, run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ button build --file my_build_description.json
</code></pre>
</div>

<p>Note that the working directory of Button will change to the directory of the
root build description before running the build.</p>

<h2 id="optional-arguments">Optional Arguments</h2>

<ul>
  <li>
    <p><code class="highlighter-rouge">--file</code>, <code class="highlighter-rouge">-f &lt;string&gt;</code></p>

    <p>Specifies the path to the build description. If not specified, Button
 searches for a file named <code class="highlighter-rouge">button.json</code> in the current directory and all
 parent directories. Thus, you can invoke this command in any subdirectory of
 your project.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--dryrun</code>, <code class="highlighter-rouge">-n</code></p>

    <p>Don’t make any functional changes; just print what might happen. This can be
 useful when refactoring the build description.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--threads</code>, <code class="highlighter-rouge">-j N</code></p>

    <p>The number of threads to use when executing tasks or checking for changes.
 By default, the number of logical cores is used.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--color {auto,never,always}</code></p>

    <p>When to colorize the output. If set to <code class="highlighter-rouge">auto</code> (the default), output is
 colorized if the standard output pipe <a href="http://linux.die.net/man/3/isatty">refers to a terminal</a>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--verbose</code>, <code class="highlighter-rouge">-v</code></p>

    <p>Display additional information such as how long each task took to complete
 or the full command line to tasks.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--autopilot</code></p>

    <p>After completing the initial build, continue watching for changes to inputs
 and building again as necessary. This can be very useful to speed up the
 edit-compile-test cycle of development.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--watchdir &lt;string&gt;</code></p>

    <p>Directory to watch for changes in. Used in conjunction with <code class="highlighter-rouge">--autopilot</code>.
 Since FUSE does not work with inotify, this is useful to use when building
 in a union file system where the “lower” file system contains source code
 and the “upper” file system is where output files are written to. If
 building in the upper file system, inotify cannot receive change events.
 However, setting <code class="highlighter-rouge">--watchdir</code> to the lower file system (so long as it isn’t
 also a FUSE file system) will work as expected.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--delay &lt;ulong&gt;</code></p>

    <p>Used in conjunction with <code class="highlighter-rouge">--autopilot</code>. The number of milliseconds to wait
 for additional changes. That is, if after an initial change notification is
 received, the number of milliseconds to wait before starting a build.</p>

    <p>For example, suppose you have <code class="highlighter-rouge">button build --autopilot</code> running and do a
 <code class="highlighter-rouge">git pull</code>. Instead of running a build for every file Git changes, the
 changes are <em>accumulated</em> and a build is run after <code class="highlighter-rouge">git pull</code> is completely
 done.</p>

    <p>By default, there is a delay of 50 milliseconds. This should be long enough
 for computer-performed tasks (such as <code class="highlighter-rouge">git pull</code>) and short enough to be
 imperceptible to a human saving changes in a text editor.</p>
  </li>
</ul>


                    </article>
                </div>
            </div>
        </div>
        <footer class="footer">
  <div class="container">
      <div class="pull-left">
          <p class="text-muted">&copy; Jason White, 2016</p>
      </div>
      <div class="pull-right">
          <p class="text-right">
              <a href="https://github.com/jasonwhite/button/tree/master/docs/_docs/commands/build.md">Help improve this page</a>
          </p>
      </div>
  </div>
</footer>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/button/assets/js/bootstrap.min.js"></script>

    </body>
</html>
